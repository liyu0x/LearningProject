# 操作系统原语

## 锁

    1.程序具有竞态条件
    2.使用严格轮换法  缺点:依赖其他进程改变标志位
    3.使用Peterson算法
    4.以上两种方法依赖TSL指令 test and set lock TSL靠锁内存总线来防止系统中断
    5.以上两种算法会出现 优先级反转问题
    6.为了解决优先级反转问题，引入了进程的睡眠与唤醒状态 缺点: 由于系统中断，导致A调用了sleep()之前，B就调用了wakeup(A),待A线程真正执行了sleep()后就永远无法唤醒
    7.为了解决上面的问题，引入了信号量(semaphore): 当B在A之前调用了wakeup(A)时，信号量+1，此时A调用了sleep()时，会去检查信号量是否>0如果大于，则不用进入sleep状态，并且将信号量-1


